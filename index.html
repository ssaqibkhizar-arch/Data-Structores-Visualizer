<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Algorithms Visualizer | C++ WASM</title>
    
    <!-- Link to our styling -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Top Navigation / Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="brand">
                <div class="logo-icon"></div>
                <h1>Graph Visualizer</h1>
            </div>
            <span class="badge">C++ Powered</span>
        </div>
        <div class="status-indicator" id="systemStatus">
            <span class="status-dot"></span> System: Loading...
        </div>
    </header>

    <!-- Main Workspace Layout -->
    <div class="workspace">
        
        <!-- LEFT SIDEBAR: Controls & Inputs -->
        <aside class="sidebar">
            
            <!-- Section 1: Initialization -->
            <section class="panel-section">
                <div class="section-header">
                    <h2>1. Graph Setup</h2>
                </div>
                <p class="helper-text">Define the number of vertices (2-20) to initialize the canvas.</p>
                
                <div class="control-row">
                    <div class="input-group">
                        <label for="vertexCount">Vertices</label>
                        <input type="number" id="vertexCount" min="2" max="20" value="6">
                    </div>
                    <button id="btnInitGraph" class="btn primary-btn">Initialize</button>
                </div>
            </section>

            <!-- Section 2: Edge Management -->
            <section class="panel-section">
                <div class="section-header">
                    <h2>2. Add Connections</h2>
                    <!-- Toggle for Weighted Graph -->
                    <label class="toggle-switch">
                        <input type="checkbox" id="toggleWeight" checked>
                        <span class="slider"></span>
                        <span class="label-text">Weighted</span>
                    </label>
                </div>

                <div class="edge-inputs">
                    <div class="small-input">
                        <label>Source</label>
                        <input type="number" id="edgeSource">
                    </div>
                    <div class="small-input">
                        <label>Dest</label>
                        <input type="number" id="edgeDest">
                    </div>
                    <!-- Weight Input (Can be hidden) -->
                    <div class="small-input" id="weightInputGroup">
                        <label>Weight</label>
                        <input type="number" id="edgeWeight" value="1">
                    </div>
                </div>
                <button id="btnAddEdge" class="btn secondary-btn">Add Edge</button>
                <div class="control-row" style="margin-top: 1rem;">
                <button id="btnShowAdjList" class="btn secondary-btn" style="font-size: 0.8rem;">Adj List</button>
                <button id="btnShowAdjMatrix" class="btn secondary-btn" style="font-size: 0.8rem;">Adj Matrix</button>
                </div>
            </section>

            <!-- Section 3: Algorithms -->
            <section class="panel-section">
                <div class="section-header">
                    <h2>3. Algorithms</h2>
                </div>
                
                <div class="input-group full-width">
                    <label for="startNode">Start Node</label>
                    <input type="number" id="startNode" value="0" placeholder="0">
                </div>

                <div class="algo-grid">
                    <button class="btn algo-btn" data-algo="bfs">BFS</button>
                    <button class="btn algo-btn" data-algo="dfs">DFS</button>
                    <button class="btn algo-btn" data-algo="prim">Prim's MST</button>
                    <button class="btn algo-btn" data-algo="dijkstra">Dijkstra</button>
                </div>
            </section>

            <!-- Section 4: Time Complexity Display -->
            <section class="panel-section complexity-box">
                <h3>Time Complexity</h3>
                <div id="complexityDisplay">
                    <span class="algo-name">Select Algorithm</span>
                    <span class="big-o">---</span>
                </div>
            </section>
        </aside>

        <!-- RIGHT AREA: Visualization & Logs -->
        <main class="main-display" id="visualizerArea">
            
            
            <!-- Canvas Wrapper (Increased Size) -->
            <div class="canvas-container">
                <canvas id="graphCanvas" width="1200" height="800"></canvas>
                <div class="canvas-overlay">Interactive Graph Area</div>
            </div>

            <!-- Console Log Wrapper (Added IDs for Dragging) -->
            <div class="console-container" id="floatingConsole">
                <div class="console-header" id="dragHandle">
                    <span>Algorithm Execution Log</span> <!-- Changed Title -->
                    <button id="btnClearConsole" class="btn-text" title="Clear Log"></button>
                </div>
                <div id="outputConsole" class="console-body">
                    <div class="log-entry system">> Initializing WebAssembly Environment...</div>
                </div>
                </div>
                    <div class="console-container" id="outputPanel" style="top: 20px; right: 20px; bottom: auto;">
                        <div class="console-header" id="outputDragHandle">
                        <span>Structure & Results</span>
                        <button id="btnClearOutput" class="btn-text" title="Clear">Clear</button>
                    </div>
                        <div id="outputBody" class="console-body">
                        <div class="log-entry system">Waiting for input...</div>
                </div>
        </div>
            

        </main>


    </div>

        <div id="ds-visualizer" class="ds-panel">
        <div class="ds-header">
            <span id="ds-type-label">QUEUE</span>
            <span class="ds-hint">(Front &larr; &rarr; Rear)</span>
        </div>
        <div class="ds-content" id="ds-content-area">
            </div>
    </div>
        
    <!-- SCRIPTS CONFIGURATION -->
    <script>
        var Module = {
            onRuntimeInitialized: function() {
                // Call the function in script.js to update the UI
                if (typeof onReady === 'function') {
                    onReady();
                }
            }
        };
    </script>
    <script src="main.js"></script>
    <script src="script.js"></script>
</body>
</html>